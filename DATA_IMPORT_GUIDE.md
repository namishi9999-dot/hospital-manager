# データインポートガイド

## 概要

Kintoneから抽出した施設管理・医療従事者在籍管理のデータを、病院顧客管理アプリに統合するためのガイドです。

---

## インポート済みデータ

### 1. 施設データ (`hospitals.csv`)

**元データ**: `01_施設管理_20260216T190800+0900.xlsx`

**インポート内容**:
- 96件の施設情報
- 項目: 名前、住所、都道府県、市区町村、電話番号

**ファイル位置**: `D:\soft\ソフト開発\ソフト開発テスト\顧客管理アプリ\files\hospitals.csv`

**追加インポートデータ** (未適用):
- ファイル: `hospitals_imported.csv`
- 内容: Excel抽出後、すべての96件施設

**手順**:
1. GitHubのリポジトリで `hospitals.csv` を置き換え
2. アプリを再読み込み
3. 病院一覧タブで新しいデータを確認

---

### 2. 医療従事者データ (`staff.csv`)

**元データ**: `03_医療者在籍管理_20260216T190941+0900.xlsx`

**インポート内容**:
- 616件の医療従事者情報
- 項目: ID、名前、所属病院、職種、部門情報

**ファイル位置**:
- サンプル: `D:\soft\ソフト開発\ソフト開発テスト\顧客管理アプリ\files\staff.csv`
- フル実データ: `staff_imported.csv`

**注意事項**:
- 初期サンプルには 2件のみ含まれています
- 616件の全データが `staff_imported.csv` に用意されています

**手順**:
1. 次のいずれかを選択:

   **オプション A: アプリのインポート機能を使用（推奨）**
   - アプリ → **⚙️ 設定** タブ
   - **📤 CSVインポート** → `staff_imported.csv` を選択
   - 自動でGitHubに同期

   **オプション B: 手動でGitHubに置き換え**
   - `staff_imported.csv` を `staff.csv` にリネーム
   - GitHubの `staff.csv` を置き換え
   - アプリを再読み込み

---

## CSV ファイル仕様

### hospitals.csv (施設情報)

```
Name,Address,Prefecture,City,Phone,Other,Memo,Targets,BedCount,ICUBeds,DialysisBeds,DialysisPatients,DialysisRenewalYear
```

**カラム説明**:
| 列名 | 説明 | 必須 | 例 |
|------|------|------|-----|
| Name | 病院名 | ○ | いずみの病院 |
| Address | 住所 | ○ | 高知県高知市薊野北町２－１０－５３ |
| Prefecture | 都道府県 | ○ | 高知県 |
| City | 市区町村 | ○ | 高知市 |
| Phone | 電話番号 | - | 088-826-5511 |
| Other | その他 | - |  |
| Memo | メモ | - | 訪問予定: 2026年3月 |
| Targets | 訪問目的 | - | 初期訪問,定期フォロー |
| BedCount | 病床数 | - | 200 |
| ICUBeds | ICU病床数 | - | 10 |
| DialysisBeds | 透析室病床数 | - | 25 |
| DialysisPatients | 透析患者数 | - | 45 |
| DialysisRenewalYear | 透析装置更新年度 | - | 2024 |

---

### staff.csv (医療従事者情報)

```
ID,Name,HospitalName,JobType,Phone,Email,Memo
```

**カラム説明**:
| 列名 | 説明 | 必須 | 例 |
|------|------|------|-----|
| ID | 従事者ID | ○ | S001 |
| Name | 名前 | ○ | 田中太郎 |
| HospitalName | 所属病院 | ○ | サンプル総合病院 |
| JobType | 職種 | - | ドクター |
| Phone | 電話番号 | - | 090-1234-5678 |
| Email | メールアドレス | - | tanaka@example.com |
| Memo | メモ | - | Division: 医師 |

---

## データ統合に関する注意

### 重複排除

Excelデータをインポートする際、以下に注意してください:

1. **病院名の一致チェック**
   - Excel施設データには 96件の施設情報が含まれます
   - アプリのサンプルデータとの重複を避けるため、確認してください

2. **医療従事者の重複**
   - Excel医療者データには 616件の従事者情報が含まれます
   - 同じ名前・病院の従事者がいないか確認してください

### GitHub 同期

- **自動同期**: インポート後、自動でGitHubに同期されます
- **手動同期**: 各タブを開き直すと最新データを取得します
- **エクスポート**: 必要に応じて修正したCSVをエクスポートできます

---

## よくある質問

### Q1: 既存データを保持しながら新データを追加したい

**A**: アプリの **⚙️ 設定** タブから **📤 CSVインポート** を使用してください。既存データの上にマージされます。

### Q2: データが重複している場合はどうする？

**A**: 以下のいずれかで対応してください:
- アプリで手動削除
- CSVファイルを編集して重複行を削除
- 削除後、再度インポート

### Q3: Excelデータの一部だけをインポートしたい

**A**: `staff_imported.csv` または `hospitals_imported.csv` をテキストエディタで編集し、不要な行を削除した上でインポートしてください。

### Q4: インポート前にデータをプレビューしたい

**A**: `hospitals_imported.csv` と `staff_imported.csv` をExcelで開いて確認してください。

---

## トラブルシューティング

### インポートが失敗する

1. CSVファイルの形式を確認
   - ヘッダー行が正しいか
   - 特殊文字の処理（カンマ、改行、クオート）

2. GitHub接続を確認
   - ⚙️ 設定タブで「接続をテスト」を実行
   - Personal Access Tokenが有効か確認

### データが表示されない

1. GitHubへの同期を確認
   - ブラウザのコンソール（F12）でエラーをチェック
   - ネットワークタブでAPIリクエストを確認

2. 各タブを再読み込み
   - キャッシュをクリア
   - ブラウザを再起動

---

## ファイル一覧

```
D:\soft\ソフト開発\ソフト開発テスト\顧客管理アプリ\files\
├── hospitals.csv                    (施設情報 - Excelデータ統合済み)
├── hospitals_imported.csv           (施設インポートデータ - 参考用)
├── staff.csv                        (サンプル + Excel実データ統合候補)
├── staff_imported.csv               (医療従事者インポートデータ - 616件)
├── targets.csv                      (訪問目的 - ユーザー定義)
├── jobtypes.csv                     (職種 - ユーザー定義)
├── schedules.csv                    (外来スケジュール)
├── appointments.csv                 (予約情報)
└── hospital-manager-github.html     (メインアプリ)
```

---

## 次のステップ

1. ✅ 施設データ (`hospitals.csv`) → **既にインポート済み**
2. ⏳ 医療従事者データ (`staff.csv`) → **staff_imported.csv から選択**
3. ⚙️ 必要に応じて職種・訪問目的をカスタマイズ
4. 📅 外来スケジュール・予約情報を追加

---

**作成日**: 2026年2月17日
**アプリバージョン**: v6
