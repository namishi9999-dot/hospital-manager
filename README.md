# 病院顧客管理アプリ v7 - 完全ドキュメント

**最終更新**: 2026年2月17日
**バージョン**: v7
**ステータス**: ✅ 本番環境対応可

---

## 📚 ドキュメント一覧と読む順序

### 🚀 初心者向け（読むべき順）

1. **[QUICK_START_GUIDE_v7.md](QUICK_START_GUIDE_v7.md)** ⭐ **最初にこれ！**
   - v7の新機能（タグ検索）の説明
   - 5分でわかる使い方
   - よくある質問・トラブル対応
   - **→ こちらから始めましょう！**

2. **[GitHub連携版セットアップガイド.md](GitHub連携版セットアップガイド.md)**
   - 初期セットアップ手順
   - GitHub設定方法
   - Personal Access Token 生成手順

3. **[DATA_IMPORT_GUIDE.md](DATA_IMPORT_GUIDE.md)**
   - Kintoneからのデータインポート
   - CSV形式の説明
   - 初期データセットアップ

### 🔧 開発・運用向け

4. **[IMPLEMENTATION_SUMMARY_v7.md](IMPLEMENTATION_SUMMARY_v7.md)** ⭐ **技術詳細はこれ**
   - v7実装の全体像
   - ファイル構成
   - 技術仕様（CSS、JavaScript）
   - データ統計
   - 動作確認チェックリスト

5. **[TAG_SEARCH_FEATURE.md](TAG_SEARCH_FEATURE.md)**
   - タグ検索機能の詳細仕様
   - 実装方針
   - 使用例

6. **[TAG_BADGE_HIDDEN.md](TAG_BADGE_HIDDEN.md)**
   - タグバッジ非表示化の変更内容
   - UIの改良ポイント
   - 影響範囲

### 🔄 データ・ツール向け

7. **[DATA_CONVERTER_GUIDE.md](DATA_CONVERTER_GUIDE.md)**
   - Kintone ↔ App CSV 変換ツール
   - Excel → CSV, CSV → Excel 変換手順
   - GitHub連携設定

8. **[STAFF_DATA_CORRECTION.md](STAFF_DATA_CORRECTION.md)**
   - 医療従事者データの修正記録
   - Kintoneデータの列マッピング
   - データ品質改善

---

## 🏗️ プロジェクト構成

### メインアプリケーション
```
hospital-manager-github.html (786行)
├── HTML構造: タブバー、ダッシュボード、各ビュー、モーダル
├── CSS: レスポンシブデザイン、Dark Mode対応
└── JavaScript: 全機能の実装
    ├── v1-v5: 施設管理、医療従事者
    ├── v6: クロスフィルター、カレンダー、アポイント
    └── v7: タグ検索、UI最適化
```

### 独立ツール
```
data-converter-kintone.html (716行)
└── Kintone Excel ↔ App CSV 双方向変換
    ├── Excel読み込み (SheetJS)
    ├── CSV処理 (Papa Parse)
    └── GitHub連携設定
```

### データファイル（CSV形式）
```
hospitals.csv              ← 施設データ（97施設）
staff_imported.csv         ← 医療従事者（616人）
targets.csv               ← ユーザー定義タグ
jobtypes.csv              ← 職種リスト
schedules.csv             ← 外来スケジュール
appointments.csv          ← アポイント管理
```

---

## ⭐ v7の主な新機能

### 🏷️ タグ検索機能
- **ダッシュボードに「🏷️ タグ検索」カード追加**
- **2列グリッドチェックボックスUI**
- **AND条件フィルタリング** (複数タグ同時検索)
- **リアルタイム結果更新**

### 📱 UI改良
- **タグバッジの非表示化** (病院一覧カード)
- **見やすいシンプルな一覧表示**
- **詳細情報で完全表示**

### 📊 タグ情報の表示場所
| 場所 | 表示 |
|------|------|
| 病院一覧 | ❌ 非表示 |
| タグ検索 | ✅ チェックボックス |
| 詳細情報 | ✅ タグバッジ |
| 編集画面 | ✅ チェックボックス |

---

## 🚀 クイックスタート

### 最短3ステップ

**ステップ1**: アプリを開く
```
hospital-manager-github.html をブラウザで開く
```

**ステップ2**: ダッシュボードで「🏷️ タグ検索」をタップ
```
ダッシュボードに表示されるカード一覧から
「🏷️ タグ検索」をクリック
```

**ステップ3**: タグをチェックして検索
```
チェックボックスでタグを選択
→ AND条件で施設が絞り込まれます

例: 「初期訪問」＋「定期フォロー」をチェック
    → 両方のタグを持つ施設のみ表示
```

### 詳細な使用方法
👉 **[QUICK_START_GUIDE_v7.md](QUICK_START_GUIDE_v7.md)** を参照

---

## 📋 機能一覧

### v1-v5 既存機能（変更なし）
- ✅ 施設データ管理（CRUD）
- ✅ 医療従事者管理（CRUD）
- ✅ ユーザー定義タグ（Targets）
- ✅ 外来スケジュール編集
- ✅ ダッシュボード表示

### v6 新機能（既存）
- ✅ クロスフィルター（都道府県×タグ双方向）
- ✅ 外来検索 AM/PM フィルター
- ✅ カレンダー・アポイント管理
- ✅ CSV エクスポート・インポート

### v7 新機能（最新）
- ✅ **タグ検索ビュー** (専用インターフェース)
- ✅ **AND条件フィルタリング** (複数タグ対応)
- ✅ **タグバッジ非表示化** (一覧スッキリ)
- ✅ **リアルタイム結果更新**

---

## 📊 データ統計

### 施設データ
- **合計**: 97施設（Kintone 96件 + サンプル 1件）
- **都道府県**: 9都道府県
- **データ完成度**: Name, Address, Prefecture, City, Phone 100% ✅

### 医療従事者データ
- **合計**: 616人（Kintone 616件）
- **ID形式**: S0001 〜 S0616（自動採番）
- **職種**: 医師、臨床工学技士、看護師等
- **データ修正済み**: Kintone診療科データを正しくマッピング ✅

### その他
- **タグ**: ユーザー定義（初期空）
- **スケジュール**: 曜日×午前午後×3スロット
- **アポイント**: 候補日→確定のワークフロー対応

---

## 🔐 セキュリティ

### GitHub認証
```
Personal Access Token を使用
├── Scope: repo
├── localStorage に暗号化保存（ブラウザ内）
└── HTTPS 通信で安全性確保
```

### データプライバシー
```
✅ ローカルストレージ: ブラウザ内のみ保存
✅ GitHub: 指定リポジトリに保存（プライベート推奨）
✅ 通信: HTTPS 暗号化
```

---

## 🛠️ テクノロジースタック

### フロントエンド
```
HTML5 + CSS3 + JavaScript（ES5互換）
├── フレームワーク: なし（軽量・軽快）
├── ライブラリ: 外部依存なし（内製）
└── GitHub連携: GitHub REST API v3
```

### データストレージ
```
GitHub リポジトリ
├── CSV ファイルベース（テキスト形式）
├── Base64 エンコード・デコード
└── 6ファイル（hospitals, staff, targets, jobtypes, schedules, appointments）
```

### 変換ツール（data-converter）
```
SheetJS: Excel ファイル読み込み
Papa Parse: CSV 処理
JSZip: ZIP ファイル生成（オプション）
```

---

## ✅ 動作確認チェックリスト

### 基本機能
- [ ] アプリをブラウザで開いて表示できる
- [ ] タブバー（病院一覧、医療従事者、カレンダー、新規追加、設定）が表示される
- [ ] ダッシュボードに5つのカード（すべて、都道府県別、**タグ検索**、スケジュール）が表示される

### v7 タグ検索機能
- [ ] 「🏷️ タグ検索」カードが緑色で表示される
- [ ] カードをタップしてタグ検索ビューに遷移できる
- [ ] チェックボックスでタグを選択できる
- [ ] 複数タグをチェック → AND条件で施設が絞り込まれる
- [ ] タグを解除すると全施設が表示される

### UI改良（タグバッジ非表示）
- [ ] 病院一覧カードにタグバッジが表示されていない
- [ ] ダッシュボード各ビューでもタグバッジが非表示
- [ ] 施設をタップして詳細を見るとタグが表示される

### GitHub連携
- [ ] 設定タブでGitHub認証情報を入力できる
- [ ] 「接続をテスト」で接続確認できる
- [ ] 施設・医療従事者の変更がGitHubに保存される

---

## 📞 サポート

### よくある質問（FAQ）
👉 [QUICK_START_GUIDE_v7.md の「❓ よくある質問」](QUICK_START_GUIDE_v7.md#-よくある質問) を参照

### トラブルシューティング
👉 [QUICK_START_GUIDE_v7.md の「🆘 トラブル対応」](QUICK_START_GUIDE_v7.md#-トラブル対応) を参照

### 技術的な詳細
👉 [IMPLEMENTATION_SUMMARY_v7.md](IMPLEMENTATION_SUMMARY_v7.md) を参照

---

## 📈 今後の拡張可能性

### 検討中の機能
1. **タグ管理UI改良**: 色分け、アイコン選択、タグ削除
2. **保存された検索**: 複合検索を名前付け保存
3. **タグ統計**: タグごとの施設数統計表示
4. **タグ相関分析**: 関連タグの提案
5. **バッチタグ付け**: 複数施設に一括タグ追加

### アーキテクチャ改善案
1. **データモデル**: CSV → JSON（複雑クエリ対応）
2. **オフライン対応**: IndexedDB ローカル完全同期
3. **バックエンド化**: マルチユーザー対応
4. **検索エンジン**: 全文検索機能

---

## 📝 バージョン履歴

| Ver | Date | Changes | File |
|-----|------|---------|------|
| v1-v4 | 過去 | 基本施設管理 | 不用 |
| v5 | 過去 | カスタムタグ、医療従事者 | 不用 |
| v6 | 過去 | クロスフィルター、カレンダー | 不用 |
| v7 | 2026/2/17 | **タグ検索UI、タグバッジ非表示** | ✅ 現在 |

---

## 🎯 ファイル一覧と説明

### メインアプリケーション
| ファイル | 説明 | サイズ |
|---------|------|--------|
| `hospital-manager-github.html` | 病院顧客管理 v7 | 786行 |
| `data-converter-kintone.html` | Kintone データ変換ツール | 716行 |

### データファイル（CSV）
| ファイル | 説明 | 行数 |
|---------|------|------|
| `hospitals.csv` | 施設データ | 98 (1ヘッダー+97施設) |
| `staff_imported.csv` | 医療従事者 | 617 (1ヘッダー+616人) |
| `targets.csv` | タグリスト | ユーザー定義 |
| `jobtypes.csv` | 職種リスト | 複数 |
| `schedules.csv` | 外来スケジュール | 複数 |
| `appointments.csv` | アポイント管理 | 複数 |
| `hospitals_imported.csv` | 初期インポート用 | 97 |

### ドキュメント（Markdown）
| ファイル | 説明 | 対象者 |
|---------|------|--------|
| `README.md` | このファイル | 全員 |
| `QUICK_START_GUIDE_v7.md` | 5分で学べる使い方 | ⭐ **初心者向け** |
| `IMPLEMENTATION_SUMMARY_v7.md` | 実装詳細レポート | 開発者 |
| `TAG_SEARCH_FEATURE.md` | タグ検索仕様 | 開発者 |
| `TAG_BADGE_HIDDEN.md` | タグバッジ非表示の変更 | 開発者 |
| `DATA_CONVERTER_GUIDE.md` | 変換ツール使用ガイド | ユーザー |
| `DATA_IMPORT_GUIDE.md` | Kintone インポート | ユーザー |
| `STAFF_DATA_CORRECTION.md` | データ修正記録 | 開発者 |
| `GitHub連携版セットアップガイド.md` | 初期セットアップ | ユーザー |

---

## 🚀 推奨される読む順序

### 👨‍💼 ユーザー向け
1. **QUICK_START_GUIDE_v7.md** - 基本的な使い方
2. **GitHub連携版セットアップガイド.md** - セットアップ
3. **DATA_IMPORT_GUIDE.md** - データインポート（必要な場合）
4. **DATA_CONVERTER_GUIDE.md** - 変換ツール使用（必要な場合）

### 👨‍💻 開発者向け
1. **README.md** - 全体理解（今これ！）
2. **IMPLEMENTATION_SUMMARY_v7.md** - 実装詳細
3. **TAG_SEARCH_FEATURE.md** - 新機能仕様
4. **STAFF_DATA_CORRECTION.md** - データ品質改善記録

---

## 💡 Tips

### 作業効率化
```
✅ ブックマーク: QUICK_START_GUIDE_v7.md をブックマーク
✅ ショートカット: hospital-manager-github.html をデスクトップに置く
✅ 定期更新: GitHub設定で自動同期を有効化
```

### データ保護
```
✅ バックアップ: GitHub リポジトリを定期バックアップ
✅ 権限管理: Private リポジトリに保存
✅ トークン管理: Personal Access Token を安全に保管
```

---

## 🎓 学習ガイド

### JavaScript
このプロジェクトで学べるパターン：
- DOM操作とイベントハンドリング
- CSV/GitHub API との連携
- 状態管理（currentView グローバル変数）
- リアルタイム UI 更新（filter + render パターン）

### Web開発
このプロジェクトで学べること：
- シングルページアプリケーション（SPA）構築
- RESTful API 統合（GitHub API v3）
- Base64 エンコード・デコード
- localStorage での永続化

---

## 📊 プロジェクト統計

```
【コード統計】
- メインアプリ: 786行（HTML+CSS+JS）
- 変換ツール: 716行（HTML+CSS+JS）
- 合計: 1,502行

【データ統計】
- 施設: 97件
- 医療従事者: 616件
- 合計: 713件

【ドキュメント統計】
- マークダウンファイル: 8個
- 総ページ数: 100ページ相当

【リリース】
- v7 リリース日: 2026年2月17日
```

---

## 📞 お問い合わせ・フィードバック

### サポート窓口
```
技術的な質問 → IMPLEMENTATION_SUMMARY_v7.md を参照
使い方がわからない → QUICK_START_GUIDE_v7.md を参照
トラブル対応 → QUICK_START_GUIDE_v7.md のトラブルシューティングを参照
```

### バグ報告
```
ブラウザコンソール (F12) でエラーメッセージを確認してください
エラー内容を記録して、開発チームに報告してください
```

---

## 🎉 まとめ

このアプリは、GitHub連携による完全なデータ管理システムです。

**v7の最大の改良点**: **タグ検索機能で、複雑なタグ管理がシンプルに！**

- 病院一覧はスッキリ（タグなし）
- タグ検索で AND条件フィルタリング
- 詳細情報で全情報表示

今すぐ **[QUICK_START_GUIDE_v7.md](QUICK_START_GUIDE_v7.md)** を開いて、新機能を体験してください！

---

**Happy Hospital Management! 🏥✨**

---

**Version**: v7
**Last Updated**: 2026年2月17日
**Status**: ✅ 本番環境対応可

