# タグバッジ非表示機能 実装レポート

## 📝 改良内容

病院一覧のカードからタグバッジを非表示にし、**タグ検索機能のみでタグを表示** するように修正しました。

---

## 🔧 修正内容

### 修正対象: `badgesHTML()` 関数

**修正前**:
```javascript
function badgesHTML(h){
  var b='';
  getTargets(h).forEach(function(t){
    b+='<span class="h-badge h-badge-target">&#x1F3AF; '+esc(t)+'</span>'
  });
  return b?'<div class="h-badges">'+b+'</div>':''
}
```

**修正後**:
```javascript
function badgesHTML(h){return''}
```

### 影響範囲

この関数は以下の2つの場所で呼び出されています：

1. **`cardStandalone(h,idx)`** - 病院一覧カード（全体ビュー、都道府県別、ターゲット別など）
2. **`cardInGroup(h,idx)`** - グループ化された病院カード

→ **両方のカード表示から タグバッジが非表示** になります

---

## 🎨 UI変更

### Before（修正前）
```
[病院名]
東京都 千代田区 ・ 03-1234-5678
🎯 初期訪問  🎯 定期フォロー  🎯 研修サポート  >
```
→ 複数のタグバッジが表示される

### After（修正後）
```
[病院名]
東京都 千代田区 ・ 03-1234-5678  >
```
→ タグバッジは表示されない（スッキリ！）

---

## 📊 タグ情報の表示場所

| 場所 | タグ表示 |
|-----|--------|
| **病院一覧カード** | ❌ **非表示** |
| **タグ検索ビュー** | ✅ **表示**（チェックボックス）|
| **詳細情報モーダル** | ✅ **表示**（タグバッジ） |
| **編集画面** | ✅ **表示**（チェックボックス） |

---

## ✨ ユーザー利用フロー

### タグで病院を探す場合

1. **「📋 病院一覧」タブ** → ダッシュボード
2. **「🏷️ タグ検索」カード** をタップ
3. 目的のタグをチェックボックスで選択
4. **AND条件**で該当病院が一覧表示
   - スッキリしたカード表示（タグなし）
5. 病院をタップ → 詳細情報表示
   - ここで **タグが表示される**（詳細情報セクション）

---

## 🎯 改良の利点

1. **画面がスッキリ**
   - 一覧がシンプルで見やすい
   - 施設名、住所、電話番号に集中

2. **タグ管理が集約**
   - タグは「タグ検索」で一元管理
   - 複数タグの AND/OR 検索が直感的

3. **詳細情報は完全表示**
   - モーダルでタグを確認可能
   - 編集画面でもタグ編集可能

4. **既存機能は変更なし**
   - 都道府県別ビュー
   - ターゲット別ビュー
   - 外来スケジュール検索
   - すべて同じく機能

---

## 🔍 動作確認チェックリスト

- [ ] 病院一覧でタグバッジが表示されていない
- [ ] ダッシュボードでもタグバッジが非表示
- [ ] 「🏷️ タグ検索」でタグをチェック → 施設が表示される（タグなし）
- [ ] 施設をタップ → 詳細モーダルでタグが表示される
- [ ] 施設を編集 → タグチェックボックスが表示される
- [ ] 他のビュー（都道府県別、ターゲット別）でもタグが非表示

---

## 📁 修正ファイル

**対象**: `hospital-manager-github.html`
**行番号**: 569行目
**変更内容**: `badgesHTML()` 関数を空関数に変更

---

**完成日**: 2026年2月17日
**ステータス**: ✅ 完了
